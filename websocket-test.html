<!DOCTYPE html>
<html>
<head>
    <title>WebSocket Health Check Test</title>
</head>
<body>
    <h1>WebSocket Infrastructure Test</h1>
    <div id="output"></div>
    
    <script>
        const output = document.getElementById('output');
        
        function log(message) {
            output.innerHTML += `<p>${new Date().toISOString()}: ${message}</p>`;
        }
        
        // Test WebSocket health check through NGINX
        log('üß™ Starting WebSocket health check test...');
        
        const ws = new WebSocket('ws://localhost:9090/ws/health-check');
        
        ws.onopen = function() {
            log('‚úÖ WebSocket connection opened successfully');
            ws.send('ping');
        };
        
        ws.onmessage = function(event) {
            log(`üì® Received: ${event.data}`);
        };
        
        ws.onclose = function(event) {
            log(`üîå WebSocket closed - Code: ${event.code}, Reason: ${event.reason}`);
        };
        
        ws.onerror = function(error) {
            log(`‚ùå WebSocket error: ${error}`);
        };
        
        // Test simulation WebSocket endpoint
        setTimeout(() => {
            log('üß™ Testing simulation WebSocket endpoint...');
            
            const simWs = new WebSocket('ws://localhost:9090/ws/simulations/test-simulation-id');
            
            simWs.onopen = function() {
                log('‚úÖ Simulation WebSocket opened successfully');
            };
            
            simWs.onmessage = function(event) {
                log(`üì® Simulation received: ${event.data}`);
            };
            
            simWs.onclose = function(event) {
                log(`üîå Simulation WebSocket closed - Code: ${event.code}, Reason: ${event.reason}`);
            };
            
            simWs.onerror = function(error) {
                log(`‚ùå Simulation WebSocket error: ${error}`);
            };
        }, 3000);
    </script>
</body>
</html>